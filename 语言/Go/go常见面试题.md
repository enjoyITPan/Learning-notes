#### Init 执行顺序

import --> const --> var --> init()

![img](https://cdn.learnku.com/uploads/images/202007/13/1/hVMYyqi6EU.png!large)

如果一个包导入了其他包，则首先初始化导入的包。

然后初始化当前包的常量。

接下来初始化当前包的变量。

最后，调用当前包的 init() 函数。

> 一个包可以有多个 init 函数 (在单个文件中或分布在多个文件中)，并且按照它们呈现给编译器的顺序被调用。

> 一个包将只初始化一次，即使它是从多个包导入的。

#### Golang的内存模型中为什么小对象多了会造成GC压力

通常小对象过多会导致GC三色法消耗过多的GPU。优化思路是，减少对象分配.

#### Go中数据竞争问题怎么解决

Data Race问题可以使用互斥锁 `sync.Mutex`, 或者也可以通过CAS无锁并发解决.

其中使用同步访问共享数据或者CAS无锁并发是处理数据竞争的一种有效的方法.

golang在1.1之后引入了竞争检测机制，可以使用 `go run -race` 或者 `go build -race`来进行静态检测。

其在内部的实现是,开启多个协程执行同一个命令， 并且记录下每个变量的状态.





















