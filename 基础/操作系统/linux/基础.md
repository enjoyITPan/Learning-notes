## 进程

进程被内核使用双向循环列表进行管理。



## 中断和中断处理

中断使得硬件得以发出通知给cpu，中断本质是一种特殊的电信号。处理器收到中断信号后会马上向操作系统反映此信号的到来，然后就由操作系统去处理新来的数据。（中断是可以随时产生的，因此内核随时可能因为新到来的中断而被打断）

不同的设备对应不同的中断，每个中断都使用唯一的数字标识。这样操作系统才能给不同的中断提供对应的中断处理程序。

现代操作系统都提供了中断机制，当硬件设备想和系统通信的时候，它首先要发出一个***异步***的中断信号去打断cpu的执行，继而打断内核的执行。中断对应一个中断信号，内核通过这个信号去找到对应的中断程序，并且调用该程序处理中断。

举例：当你敲击键盘时，键盘硬件设备会发送一个中断信号给系统，系统收到该信号后会调用对应的中断程序进行数据处理。

中断服务程序是在一个专门的的中断上下文中运行，与所有的进程都隔离开，这样可以保证第一时间响应和处理中断，然后快速推出。



## 内核定义

通常一个内核由负责响应中断的***中断服务程序***，负责管理多个进程从而分享cpu时间的***调度程序***，负责管理进程地址空间的***内存管理程序***，负责管理网络、进程间通信等系统服务共同组成。

对于提供保护机制的现代操作系统，内核独立于普通程序，它处于系统态。拥有受保护的内存空间和访问硬件设备的所有权限。这种系统态和被保护起来的内存空间，统称内核空间。

## 内核架构

<img src="https://gitee.com/nieyunshu/picture/raw/master/img/20211212220744.png" alt="image-20211202154739062" style="zoom: 33%;" />

<img src="https://gitee.com/nieyunshu/picture/raw/master/img/20211212220803.png" alt="image-20211202155356250" style="zoom:33%;" />
